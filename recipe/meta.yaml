{% set name = "smee" %}
{% set version = "0.13.0" %}

package:
  name: {{ name|lower }}-split
  version: {{ version }}

source:
  url: https://github.com/SimonBoothroyd/smee/archive/{{ version }}.tar.gz
  sha256: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855

build:
  number: 0

outputs:
  - name: {{ name|lower }}-base
    script: build_base.sh
    build:
      noarch: python
    requirements:
      host:
        - python >=3.10
        - pip
        - setuptools >=61.0
        - setuptools_scm >=8
      run:
        - python >=3.10
        - openff-units
        - openff-toolkit-base >=0.9.2
        - openff-interchange-base >=0.3.17
        - pytorch  # [unix]
        - nnpops
        - __unix  # [unix]
    test:
      imports:
        - smee

  - name: {{ name|lower }}
    build:
      noarch: python
    requirements:
      host:
        - python >=3.10
      run:
        - python >=3.10
        - {{ pin_subpackage('smee-base', exact=True) }}
        # md simulations
        - openmm
        - packmol
        - numpy
        - msgpack-python
        - pydantic
        - pydantic-units
        # included for convenience so that the openff toolkit can
        # parameterize molecules without needing extra installs
        - rdkit
        - ambertools  # [unix]
        - __unix  # [unix]
    test:
      imports:
        - smee

about:
  home: https://github.com/SimonBoothroyd/smee
  summary: 'Differentiably evaluate energies using SMIRNOFF force fields'
  description: |
    A framework that aims to offer a simple API for differentiably evaluating 
    the energy of SMIRNOFF force fields applied to molecules using pytorch.
  license: MIT
  license_file:
    - LICENSE
  doc_url: https://github.com/SimonBoothroyd/smee
  dev_url: https://github.com/SimonBoothroyd/smee

extra:
  recipe-maintainers:
    - SimonBoothroyd
